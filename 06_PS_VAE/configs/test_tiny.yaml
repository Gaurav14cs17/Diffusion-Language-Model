# PS-VAE Test Configuration - Tiny Dataset Validation
# Uses CIFAR-10 (or synthetic data) for quick validation of training code

# Model Configuration - Minimal for fast testing
model:
  encoder:
    type: "dinov2"
    size: "base"      # Use smallest model for testing
    freeze: false
  
  latent:
    dim: 32           # Smaller latent dim for testing
    spatial_downsample: 16
  
  loss:
    kl_weight: 0.0001
    semantic_weight: 1.0
    pixel_weight: 1.0
    perceptual_weight: 0.0  # Disable for faster testing

# Diffusion Configuration - Minimal
diffusion:
  num_timesteps: 100    # Fewer timesteps for testing
  beta_schedule: "scaled_linear"
  beta_start: 0.0001
  beta_end: 0.02
  prediction_type: "epsilon"
  
  dit:
    hidden_size: 256    # Smaller for testing
    depth: 4            # Fewer layers
    num_heads: 4
    mlp_ratio: 4.0
    text_dim: 512       # Smaller text dim
    num_text_tokens: 32
    class_dropout_prob: 0.1
    learn_sigma: false  # Simpler for testing

# Training Configuration - Minimal
training:
  seed: 42
  epochs: 2            # Just 2 epochs for validation
  batch_size: 4        # Small batch
  gradient_accumulation_steps: 1
  
  optimizer:
    type: "adamw"
    lr: 1.0e-4
    weight_decay: 0.01
    betas: [0.9, 0.999]
    eps: 1.0e-8
  
  scheduler:
    type: "cosine"
    warmup_steps: 10
    min_lr: 1.0e-6
  
  mixed_precision: "no"  # Disable for CPU compatibility
  
  save_every: 100000     # Don't save during test
  eval_every: 100000
  
  ema:
    enabled: false       # Disable for faster testing

# Data Configuration
data:
  image_size: 112        # Must be multiple of 14 for DINOv2 patch size
  train_data_dir: "data/test_train"
  val_data_dir: "data/test_val"
  num_workers: 0         # Single worker for testing

# Logging Configuration
logging:
  project_name: "ps-vae-test"
  run_name: "test_validation"
  log_every: 10
  use_wandb: false       # Disable wandb for testing

# Inference Configuration
inference:
  num_inference_steps: 10
  cfg_scale: 1.0
  eta: 0.0


<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2200 4200" width="2200" height="4200">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#D53F8C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ED64A6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stepGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#38A169;stop-opacity:0.1" />
      <stop offset="100%" style="stop-color:#68D391;stop-opacity:0.1" />
    </linearGradient>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#276749"/>
    </marker>
    <marker id="arrowPink" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#D53F8C"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="2200" height="4200" fill="#FAFBFC"/>
  
  <!-- Main Title Header -->
  <rect x="50" y="40" width="2100" height="120" rx="15" fill="url(#headerGrad)" stroke="#97266D" stroke-width="3"/>
  <text x="1100" y="110" font-family="Georgia, serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">
    Sampling &amp; Generation Algorithms
  </text>
  <text x="1100" y="145" font-family="Arial, sans-serif" font-size="22" fill="#FED7E2" text-anchor="middle">
    From Noise to Text: The Reverse Diffusion Process
  </text>

  <!-- Section 1: Overview -->
  <rect x="50" y="200" width="2100" height="380" rx="12" fill="#FFF5F7" stroke="#D53F8C" stroke-width="3"/>
  <rect x="50" y="200" width="2100" height="60" rx="12" fill="#D53F8C"/>
  <text x="1100" y="242" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    1. SAMPLING OVERVIEW
  </text>

  <text x="100" y="310" font-family="Georgia, serif" font-size="28" font-weight="bold" fill="#000000">
    Goal: Generate text by iteratively denoising from fully masked sequence
  </text>
  
  <rect x="100" y="350" width="980" height="200" rx="10" fill="#FFFFFF" stroke="#B83280" stroke-width="3"/>
  <text x="590" y="395" font-family="Georgia, serif" font-size="26" font-weight="bold" fill="#000000" text-anchor="middle">
    Starting Point
  </text>
  <text x="140" y="445" font-family="Courier New, monospace" font-size="22" font-weight="bold" fill="#000000">
    x_T = [M][M][M]...[M][M]
  </text>
  <text x="140" y="495" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • All tokens are [MASK]
  </text>
  <text x="140" y="530" font-family="Arial, sans-serif" font-size="20" fill="#1a1a1a">
    • Length n determined by task
  </text>

  <rect x="1120" y="350" width="980" height="200" rx="10" fill="#FFFFFF" stroke="#B83280" stroke-width="3"/>
  <text x="1610" y="395" font-family="Georgia, serif" font-size="26" font-weight="bold" fill="#000000" text-anchor="middle">
    End Point
  </text>
  <text x="1160" y="445" font-family="Courier New, monospace" font-size="22" font-weight="bold" fill="#000000">
    x_0 = The cat sat on the mat
  </text>
  <text x="1160" y="495" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • All tokens are real words
  </text>
  <text x="1160" y="530" font-family="Arial, sans-serif" font-size="20" fill="#1a1a1a">
    • Coherent generated text
  </text>

  <!-- Section 2: Basic Algorithm -->
  <rect x="50" y="620" width="2100" height="760" rx="12" fill="#F0FFF4" stroke="#38A169" stroke-width="3"/>
  <rect x="50" y="620" width="2100" height="60" rx="12" fill="#38A169"/>
  <text x="1100" y="662" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    2. BASIC SAMPLING ALGORITHM
  </text>

  <rect x="100" y="710" width="2000" height="640" rx="10" fill="#FFFFFF" stroke="#276749" stroke-width="3"/>
  
  <text x="1100" y="755" font-family="Georgia, serif" font-size="28" font-weight="bold" fill="#000000" text-anchor="middle">
    Algorithm: MDLM/Dream Sampling
  </text>
  
  <rect x="140" y="780" width="1920" height="540" rx="8" fill="#E6FFFA" stroke="#319795" stroke-width="2"/>
  
  <text x="180" y="825" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#2B6CB0">
    Input: Trained model f_θ, sequence length n, num_steps T
  </text>
  <text x="180" y="860" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#2B6CB0">
    Output: Generated sequence x₀
  </text>
  
  <line x1="180" y1="880" x2="2020" y2="880" stroke="#4A5568" stroke-width="1" stroke-dasharray="5,5"/>
  
  <text x="180" y="920" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#000000">
    1. Initialize: x_T ← [MASK, MASK, ..., MASK]  (n tokens)
  </text>
  
  <text x="180" y="970" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#000000">
    2. for t = T, T-1, ..., 1 do:
  </text>
  
  <text x="220" y="1020" font-family="Courier New, monospace" font-size="18" fill="#000000">
    a. Compute timestep: τ = t / T  (continuous time in [0,1])
  </text>
  
  <text x="220" y="1060" font-family="Courier New, monospace" font-size="18" fill="#000000">
    b. Predict clean tokens: logits = f_θ(xₜ, τ)
  </text>
  
  <text x="220" y="1100" font-family="Courier New, monospace" font-size="18" fill="#000000">
    c. For each masked position i where xₜⁱ = [MASK]:
  </text>
  
  <text x="260" y="1140" font-family="Courier New, monospace" font-size="18" fill="#000000">
    i.  Get probabilities: p(x₀ⁱ) = softmax(logitsⁱ)
  </text>
  
  <text x="260" y="1180" font-family="Courier New, monospace" font-size="18" fill="#000000">
    ii. Compute unmasking prob: θₜ = (αₜ₋₁ - αₜ) / (1 - αₜ)
  </text>
  
  <text x="260" y="1220" font-family="Courier New, monospace" font-size="18" fill="#000000">
    iii. With probability θₜ: sample xₜ₋₁ⁱ ~ p(x₀ⁱ)
  </text>
  
  <text x="260" y="1260" font-family="Courier New, monospace" font-size="18" fill="#000000">
    iv.  Otherwise: xₜ₋₁ⁱ = [MASK] (stay masked)
  </text>
  
  <text x="220" y="1300" font-family="Courier New, monospace" font-size="18" fill="#000000">
    d. For unmasked positions: xₜ₋₁ⁱ = xₜⁱ (keep the token)
  </text>
  
  <text x="180" y="1350" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#000000">
    3. return x₀
  </text>

  <!-- Section 3: Visual Example -->
  <rect x="50" y="1420" width="2100" height="520" rx="12" fill="#EBF8FF" stroke="#3182CE" stroke-width="3"/>
  <rect x="50" y="1420" width="2100" height="60" rx="12" fill="#3182CE"/>
  <text x="1100" y="1462" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    3. VISUAL EXAMPLE: STEP-BY-STEP GENERATION
  </text>

  <!-- Step visualization -->
  <text x="100" y="1530" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000">
    Generating "The cat sat on mat" (T=5 steps):
  </text>
  
  <!-- t=5 (all masked) -->
  <text x="100" y="1580" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2B6CB0">t=5 (τ=1.0):</text>
  <rect x="260" y="1555" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="295" y="1582" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="340" y="1555" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="375" y="1582" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="420" y="1555" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="455" y="1582" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="500" y="1555" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="535" y="1582" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="580" y="1555" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="615" y="1582" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <text x="700" y="1582" font-family="Arial, sans-serif" font-size="18" fill="#718096">← All tokens masked</text>
  
  <!-- Arrow -->
  <line x1="1100" y1="1600" x2="1100" y2="1640" stroke="#276749" stroke-width="3" marker-end="url(#arrowGreen)"/>
  
  <!-- t=4 -->
  <text x="100" y="1680" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2B6CB0">t=4 (τ=0.8):</text>
  <rect x="260" y="1655" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="295" y="1682" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="340" y="1655" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="375" y="1682" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">cat</text>
  <rect x="420" y="1655" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="455" y="1682" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="500" y="1655" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="535" y="1682" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="580" y="1655" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="615" y="1682" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <text x="700" y="1682" font-family="Arial, sans-serif" font-size="18" fill="#718096">← 1 token unmasked</text>
  
  <!-- Arrow -->
  <line x1="1100" y1="1700" x2="1100" y2="1740" stroke="#276749" stroke-width="3" marker-end="url(#arrowGreen)"/>
  
  <!-- t=3 -->
  <text x="100" y="1780" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2B6CB0">t=3 (τ=0.6):</text>
  <rect x="260" y="1755" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="295" y="1782" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">The</text>
  <rect x="340" y="1755" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="375" y="1782" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">cat</text>
  <rect x="420" y="1755" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="455" y="1782" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="500" y="1755" width="70" height="40" rx="5" fill="#FED7D7" stroke="#C53030" stroke-width="2"/>
  <text x="535" y="1782" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">[M]</text>
  <rect x="580" y="1755" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="615" y="1782" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">mat</text>
  <text x="700" y="1782" font-family="Arial, sans-serif" font-size="18" fill="#718096">← 3 tokens unmasked</text>
  
  <!-- Arrow -->
  <line x1="1100" y1="1800" x2="1100" y2="1840" stroke="#276749" stroke-width="3" marker-end="url(#arrowGreen)"/>
  
  <!-- t=1 (final) -->
  <text x="100" y="1880" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#276749">t=0 (τ=0.0):</text>
  <rect x="260" y="1855" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="295" y="1882" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">The</text>
  <rect x="340" y="1855" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="375" y="1882" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">cat</text>
  <rect x="420" y="1855" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="455" y="1882" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">sat</text>
  <rect x="500" y="1855" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="535" y="1882" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">on</text>
  <rect x="580" y="1855" width="70" height="40" rx="5" fill="#C6F6D5" stroke="#276749" stroke-width="2"/>
  <text x="615" y="1882" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000" text-anchor="middle">mat</text>
  <text x="700" y="1882" font-family="Arial, sans-serif" font-size="18" fill="#276749" font-weight="bold">← Complete! All unmasked</text>

  <!-- Section 4: Sampling Strategies -->
  <rect x="50" y="1980" width="2100" height="620" rx="12" fill="#FEF3C7" stroke="#D97706" stroke-width="3"/>
  <rect x="50" y="1980" width="2100" height="60" rx="12" fill="#D97706"/>
  <text x="1100" y="2022" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    4. ADVANCED SAMPLING STRATEGIES
  </text>

  <rect x="100" y="2070" width="650" height="500" rx="10" fill="#FFFFFF" stroke="#B45309" stroke-width="3"/>
  <text x="425" y="2115" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Greedy / Argmax
  </text>
  
  <text x="140" y="2165" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#000000">
    x̂₀ⁱ = argmax p_θ(·|xₜ)
  </text>
  
  <text x="140" y="2215" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • Always pick highest prob token
  </text>
  <text x="140" y="2255" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • Deterministic output
  </text>
  <text x="140" y="2295" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • Fast but less diverse
  </text>
  
  <text x="140" y="2355" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#276749">
    Best for:
  </text>
  <text x="160" y="2390" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Factual tasks
  </text>
  <text x="160" y="2425" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Code generation
  </text>
  <text x="160" y="2460" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • When consistency matters
  </text>
  
  <text x="140" y="2520" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#C53030">
    Limitation:
  </text>
  <text x="160" y="2555" font-family="Arial, sans-serif" font-size="16" fill="#1a1a1a">
    May collapse to generic text
  </text>

  <rect x="780" y="2070" width="650" height="500" rx="10" fill="#FFFFFF" stroke="#B45309" stroke-width="3"/>
  <text x="1105" y="2115" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Temperature Sampling
  </text>
  
  <text x="820" y="2165" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#000000">
    p'(v) ∝ p(v)^(1/τ)
  </text>
  
  <text x="820" y="2215" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • τ &lt; 1: Sharper distribution
  </text>
  <text x="820" y="2255" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • τ &gt; 1: Flatter distribution
  </text>
  <text x="820" y="2295" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    • τ = 0: Becomes argmax
  </text>
  
  <text x="820" y="2355" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#276749">
    Typical values:
  </text>
  <text x="840" y="2390" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • τ = 0.7-0.9 for coherence
  </text>
  <text x="840" y="2425" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • τ = 1.0-1.2 for creativity
  </text>
  
  <text x="820" y="2485" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2B6CB0">
    Key insight:
  </text>
  <text x="840" y="2520" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    Controls randomness vs
  </text>
  <text x="840" y="2555" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    determinism trade-off
  </text>

  <rect x="1460" y="2070" width="640" height="500" rx="10" fill="#FFFFFF" stroke="#B45309" stroke-width="3"/>
  <text x="1780" y="2115" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Top-k / Top-p Sampling
  </text>
  
  <text x="1500" y="2165" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    Top-k:
  </text>
  <text x="1520" y="2200" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    Sample from top k tokens only
  </text>
  
  <text x="1500" y="2250" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    Top-p (nucleus):
  </text>
  <text x="1520" y="2285" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    Sample from smallest set with
  </text>
  <text x="1520" y="2315" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    cumulative prob ≥ p
  </text>
  
  <text x="1500" y="2365" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#276749">
    Advantages:
  </text>
  <text x="1520" y="2400" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Filters low-prob noise
  </text>
  <text x="1520" y="2435" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Maintains diversity
  </text>
  <text x="1520" y="2470" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Adaptive (top-p)
  </text>
  
  <text x="1500" y="2530" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2B6CB0">
    Typical: k=50, p=0.95
  </text>

  <!-- Section 5: Parallel vs Sequential -->
  <rect x="50" y="2640" width="2100" height="480" rx="12" fill="#FAF5FF" stroke="#805AD5" stroke-width="3"/>
  <rect x="50" y="2640" width="2100" height="60" rx="12" fill="#805AD5"/>
  <text x="1100" y="2682" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    5. PARALLEL vs SEQUENTIAL GENERATION
  </text>

  <rect x="100" y="2730" width="980" height="360" rx="10" fill="#FFFFFF" stroke="#6B46C1" stroke-width="3"/>
  <text x="590" y="2775" font-family="Georgia, serif" font-size="26" font-weight="bold" fill="#000000" text-anchor="middle">
    Diffusion (Parallel)
  </text>
  
  <text x="140" y="2825" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • All positions updated simultaneously
  </text>
  <text x="140" y="2865" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • T forward passes total
  </text>
  <text x="140" y="2905" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • T can be much smaller than n
  </text>
  
  <text x="140" y="2960" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#276749">
    Time complexity:
  </text>
  <text x="160" y="3000" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#000000">
    O(T) forward passes
  </text>
  <text x="160" y="3040" font-family="Arial, sans-serif" font-size="18" fill="#1a1a1a">
    (typically T = 8-64 steps)
  </text>

  <rect x="1120" y="2730" width="980" height="360" rx="10" fill="#FFFFFF" stroke="#6B46C1" stroke-width="3"/>
  <text x="1610" y="2775" font-family="Georgia, serif" font-size="26" font-weight="bold" fill="#000000" text-anchor="middle">
    Autoregressive (Sequential)
  </text>
  
  <text x="1160" y="2825" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • One position per step
  </text>
  <text x="1160" y="2865" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • n forward passes for n tokens
  </text>
  <text x="1160" y="2905" font-family="Arial, sans-serif" font-size="20" fill="#000000">
    • Scales linearly with length
  </text>
  
  <text x="1160" y="2960" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#C53030">
    Time complexity:
  </text>
  <text x="1180" y="3000" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#000000">
    O(n) forward passes
  </text>
  <text x="1180" y="3040" font-family="Arial, sans-serif" font-size="18" fill="#1a1a1a">
    (can be 1000s for long text)
  </text>

  <!-- Section 6: Conditional Generation -->
  <rect x="50" y="3160" width="2100" height="520" rx="12" fill="#E6FFFA" stroke="#319795" stroke-width="3"/>
  <rect x="50" y="3160" width="2100" height="60" rx="12" fill="#319795"/>
  <text x="1100" y="3202" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    6. CONDITIONAL GENERATION
  </text>

  <rect x="100" y="3250" width="650" height="400" rx="10" fill="#FFFFFF" stroke="#2C7A7B" stroke-width="3"/>
  <text x="425" y="3295" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Text Infilling
  </text>
  
  <text x="140" y="3345" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    Given: "The [M][M][M] sat on mat"
  </text>
  <text x="140" y="3385" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    Output: "The cat sat on mat"
  </text>
  
  <text x="140" y="3435" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    Method:
  </text>
  <text x="160" y="3475" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Initialize with partial masks
  </text>
  <text x="160" y="3510" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Keep known tokens fixed
  </text>
  <text x="160" y="3545" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Only unmask [M] positions
  </text>
  
  <text x="140" y="3600" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#276749">
    Natural for diffusion!
  </text>

  <rect x="780" y="3250" width="650" height="400" rx="10" fill="#FFFFFF" stroke="#2C7A7B" stroke-width="3"/>
  <text x="1105" y="3295" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Prompt Continuation
  </text>
  
  <text x="820" y="3345" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    Given: "The cat" + [M][M][M]
  </text>
  <text x="820" y="3385" font-family="Arial, sans-serif" font-size="18" fill="#000000">
    Output: "The cat sat on mat"
  </text>
  
  <text x="820" y="3435" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    Method:
  </text>
  <text x="840" y="3475" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Set prefix as unmasked
  </text>
  <text x="840" y="3510" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Append masked tokens
  </text>
  <text x="840" y="3545" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • Generate continuation
  </text>
  
  <text x="820" y="3600" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#276749">
    Bidirectional context!
  </text>

  <rect x="1460" y="3250" width="640" height="400" rx="10" fill="#FFFFFF" stroke="#2C7A7B" stroke-width="3"/>
  <text x="1780" y="3295" font-family="Georgia, serif" font-size="24" font-weight="bold" fill="#000000" text-anchor="middle">
    Classifier-Free Guidance
  </text>
  
  <text x="1500" y="3345" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#000000">
    ε̃ = ε_uncond + w(ε_cond - ε_uncond)
  </text>
  
  <text x="1500" y="3395" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    For discrete:
  </text>
  <text x="1520" y="3435" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    Scale logits based on
  </text>
  <text x="1520" y="3470" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    conditional vs unconditional
  </text>
  
  <text x="1500" y="3520" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000">
    w (guidance scale):
  </text>
  <text x="1520" y="3555" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • w=1: Normal sampling
  </text>
  <text x="1520" y="3590" font-family="Arial, sans-serif" font-size="16" fill="#000000">
    • w&gt;1: Stronger conditioning
  </text>
  <text x="1520" y="3625" font-family="Arial, sans-serif" font-size="16" fill="#1a1a1a">
    • Typical: w = 3-7
  </text>

  <!-- Section 7: Summary -->
  <rect x="50" y="3720" width="2100" height="440" rx="12" fill="#2D3748" stroke="#1A202C" stroke-width="3"/>
  <text x="1100" y="3775" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="white" text-anchor="middle">
    7. GENERATION QUALITY vs SPEED TRADE-OFF
  </text>

  <rect x="100" y="3810" width="2000" height="320" rx="10" fill="#F7FAFC" stroke="#4A5568" stroke-width="2"/>
  
  <text x="140" y="3860" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#000000">
    Number of Steps T:
  </text>
  
  <!-- Scale visualization -->
  <rect x="200" y="3890" width="1800" height="50" rx="5" fill="none" stroke="#4A5568" stroke-width="2"/>
  <rect x="200" y="3890" width="400" height="50" rx="5" fill="#FED7D7"/>
  <rect x="600" y="3890" width="600" height="50" fill="#FEFCBF"/>
  <rect x="1200" y="3890" width="800" height="50" rx="5" fill="#C6F6D5"/>
  
  <text x="400" y="3925" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000" text-anchor="middle">T=1-8</text>
  <text x="400" y="3965" font-family="Arial, sans-serif" font-size="16" fill="#C53030" text-anchor="middle">Fast, lower quality</text>
  
  <text x="900" y="3925" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000" text-anchor="middle">T=16-32</text>
  <text x="900" y="3965" font-family="Arial, sans-serif" font-size="16" fill="#B45309" text-anchor="middle">Balanced</text>
  
  <text x="1600" y="3925" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#000000" text-anchor="middle">T=64-256</text>
  <text x="1600" y="3965" font-family="Arial, sans-serif" font-size="16" fill="#276749" text-anchor="middle">Best quality, slower</text>
  
  <text x="140" y="4030" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#000000">
    Dream 7B typical: T = 128-256 for high quality, T = 16-32 for fast inference
  </text>
  
  <text x="140" y="4080" font-family="Arial, sans-serif" font-size="20" fill="#1a1a1a">
    • More steps = better token prediction per position = higher coherence
  </text>
  <text x="140" y="4115" font-family="Arial, sans-serif" font-size="20" fill="#1a1a1a">
    • Fewer steps = faster generation but may miss optimal tokens
  </text>
</svg>


<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2200 3900" width="2200" height="3900">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0D47A1"/>
      <stop offset="100%" style="stop-color:#1976D2"/>
    </linearGradient>
    <linearGradient id="contGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E3F2FD"/>
      <stop offset="100%" style="stop-color:#BBDEFB"/>
    </linearGradient>
    <linearGradient id="discGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF3E0"/>
      <stop offset="100%" style="stop-color:#FFE0B2"/>
    </linearGradient>
    <linearGradient id="latentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F3E5F5"/>
      <stop offset="100%" style="stop-color:#E1BEE7"/>
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="2200" height="3900" fill="#FAFBFC"/>
  
  <!-- Main Title -->
  <rect x="50" y="40" width="2100" height="120" rx="15" fill="url(#headerGrad)"/>
  <text x="1100" y="115" font-family="Georgia, serif" font-size="52" font-weight="bold" fill="#FFFFFF" text-anchor="middle">DATA SPACE IN DIFFUSION MODELS</text>
  
  <!-- Section 1: What is Data Space -->
  <rect x="50" y="200" width="2100" height="500" rx="12" fill="#FFFFFF" stroke="#1976D2" stroke-width="3"/>
  <text x="80" y="260" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#0D47A1">1. What is Data Space?</text>
  
  <!-- Data Manifold Visualization -->
  <rect x="100" y="300" width="650" height="360" rx="10" fill="#F5F5F5" stroke="#666" stroke-width="2"/>
  <text x="425" y="340" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#333" text-anchor="middle">Data Manifold Visualization</text>
  
  <!-- High-dimensional space (outer ellipse) -->
  <ellipse cx="425" cy="500" rx="260" ry="130" fill="none" stroke="#BBDEFB" stroke-width="3" stroke-dasharray="10,5"/>
  <text x="425" y="650" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">Full Space R^d (high-dimensional)</text>
  
  <!-- Data manifold (inner curved shape) -->
  <path d="M 220 470 Q 320 400 425 430 Q 530 460 580 500 Q 620 560 530 580 Q 425 600 320 560 Q 250 520 220 470" 
        fill="url(#contGrad)" stroke="#1565C0" stroke-width="3"/>
  <text x="425" y="510" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#0D47A1" text-anchor="middle">Data Manifold</text>
  <text x="425" y="535" font-family="Arial, sans-serif" font-size="14" fill="#1565C0" text-anchor="middle">where p_data lives</text>
  
  <!-- Sample points -->
  <circle cx="280" cy="470" r="8" fill="#1565C0"/>
  <circle cx="380" cy="440" r="8" fill="#1565C0"/>
  <circle cx="480" cy="480" r="8" fill="#1565C0"/>
  <circle cx="400" cy="550" r="8" fill="#1565C0"/>
  <circle cx="520" cy="530" r="8" fill="#1565C0"/>
  <text x="300" y="465" font-family="Arial, sans-serif" font-size="14" fill="#1565C0">x0</text>
  
  <!-- Definition Box -->
  <rect x="800" y="300" width="1300" height="360" rx="10" fill="#FFFFFF" stroke="#1976D2" stroke-width="2"/>
  <text x="830" y="350" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">Formal Definition</text>
  
  <text x="850" y="410" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1a1a1a">Data Space X:</text>
  <rect x="870" y="425" width="1180" height="55" rx="8" fill="#E3F2FD" stroke="#1565C0" stroke-width="2"/>
  <text x="1460" y="462" font-family="Times New Roman, serif" font-size="24" font-weight="bold" fill="#000" text-anchor="middle">X is subset of R^d where d = dimensionality</text>
  
  <text x="850" y="520" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1a1a1a">Data Distribution:</text>
  <rect x="870" y="535" width="1180" height="55" rx="8" fill="#E3F2FD" stroke="#1565C0" stroke-width="2"/>
  <text x="1460" y="572" font-family="Times New Roman, serif" font-size="24" font-weight="bold" fill="#000" text-anchor="middle">x0 ~ p_data(x) - Unknown true distribution</text>
  
  <text x="850" y="640" font-family="Georgia, serif" font-size="18" fill="#1565C0" font-style="italic">Key Insight: Real data lives on a low-dimensional manifold within high-dimensional space</text>
  
  <!-- Section 2: Types of Data Spaces -->
  <rect x="50" y="740" width="2100" height="750" rx="12" fill="url(#contGrad)" stroke="#1976D2" stroke-width="3"/>
  <text x="80" y="800" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#0D47A1">2. Types of Data Spaces in Diffusion</text>
  
  <!-- Continuous Space -->
  <rect x="80" y="850" width="660" height="600" rx="10" fill="#FFFFFF" stroke="#1565C0" stroke-width="3"/>
  <text x="410" y="900" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#1565C0" text-anchor="middle">CONTINUOUS SPACE</text>
  
  <!-- Image icon -->
  <rect x="130" y="940" width="180" height="140" rx="8" fill="#E3F2FD" stroke="#1565C0" stroke-width="2"/>
  <rect x="150" y="960" width="40" height="40" fill="#1976D2"/>
  <rect x="200" y="960" width="40" height="40" fill="#42A5F5"/>
  <rect x="150" y="1010" width="40" height="40" fill="#64B5F6"/>
  <rect x="200" y="1010" width="40" height="40" fill="#1976D2"/>
  <text x="220" y="1110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565C0" text-anchor="middle">Image</text>
  
  <!-- Audio waveform -->
  <rect x="350" y="940" width="180" height="140" rx="8" fill="#E3F2FD" stroke="#1565C0" stroke-width="2"/>
  <path d="M 370 1010 Q 400 960 430 1010 Q 460 1060 490 1010 Q 510 980 520 1010" stroke="#1565C0" stroke-width="3" fill="none"/>
  <text x="440" y="1110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565C0" text-anchor="middle">Audio</text>
  
  <text x="110" y="1170" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Properties:</text>
  <text x="130" y="1205" font-family="Arial, sans-serif" font-size="16" fill="#333">- Values in R (real numbers)</text>
  <text x="130" y="1235" font-family="Arial, sans-serif" font-size="16" fill="#333">- Gaussian noise naturally applies</text>
  <text x="130" y="1265" font-family="Arial, sans-serif" font-size="16" fill="#333">- Standard DDPM / Score matching</text>
  
  <rect x="110" y="1290" width="600" height="50" rx="8" fill="#BBDEFB" stroke="#1565C0" stroke-width="2"/>
  <text x="410" y="1322" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">x_t = sqrt(alpha_bar_t) * x0 + sqrt(1-alpha_bar_t) * eps</text>
  
  <text x="410" y="1390" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">x in [0,1]^(H x W x C) for images</text>
  
  <!-- Discrete Space -->
  <rect x="770" y="850" width="660" height="600" rx="10" fill="#FFFFFF" stroke="#E65100" stroke-width="3"/>
  <text x="1100" y="900" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#E65100" text-anchor="middle">DISCRETE SPACE</text>
  
  <!-- Token visualization -->
  <rect x="820" y="940" width="260" height="140" rx="8" fill="url(#discGrad)" stroke="#E65100" stroke-width="2"/>
  <text x="950" y="990" font-family="Courier, monospace" font-size="16" font-weight="bold" fill="#E65100" text-anchor="middle">[CLS] The cat sat</text>
  <text x="950" y="1020" font-family="Courier, monospace" font-size="16" font-weight="bold" fill="#E65100" text-anchor="middle">on the mat [SEP]</text>
  <text x="950" y="1065" font-family="Arial, sans-serif" font-size="14" fill="#E65100" text-anchor="middle">Token IDs: {1, ..., V}</text>
  
  <!-- Categories -->
  <rect x="1100" y="940" width="180" height="140" rx="8" fill="url(#discGrad)" stroke="#E65100" stroke-width="2"/>
  <circle cx="1150" cy="1000" r="20" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="1150" y="1006" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100" text-anchor="middle">A</text>
  <circle cx="1230" cy="1000" r="20" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="1230" y="1006" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100" text-anchor="middle">B</text>
  <circle cx="1190" cy="1055" r="20" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="1190" y="1061" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100" text-anchor="middle">C</text>
  
  <text x="800" y="1170" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Properties:</text>
  <text x="820" y="1205" font-family="Arial, sans-serif" font-size="16" fill="#333">- Values in finite set {1, ..., V}</text>
  <text x="820" y="1235" font-family="Arial, sans-serif" font-size="16" fill="#333">- Needs masking/transition matrices</text>
  <text x="820" y="1265" font-family="Arial, sans-serif" font-size="16" fill="#333">- D3PM, MDLM, Absorbing diffusion</text>
  
  <rect x="800" y="1290" width="600" height="50" rx="8" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="1100" y="1322" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">q(x_t|x0) = Cat(x; alpha_t * x0 + (1-alpha_t)/V)</text>
  
  <text x="1100" y="1390" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">x in {1, ..., V}^n for text</text>
  
  <!-- Latent Space -->
  <rect x="1460" y="850" width="660" height="600" rx="10" fill="#FFFFFF" stroke="#7B1FA2" stroke-width="3"/>
  <text x="1790" y="900" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#7B1FA2" text-anchor="middle">LATENT SPACE</text>
  
  <!-- Encoder-Decoder diagram -->
  <rect x="1510" y="960" width="100" height="70" rx="8" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2"/>
  <text x="1560" y="1000" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Image x</text>
  
  <line x1="1610" y1="995" x2="1680" y2="995" stroke="#7B1FA2" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1645" y="980" font-family="Arial, sans-serif" font-size="12" fill="#7B1FA2">E</text>
  
  <ellipse cx="1750" cy="995" rx="50" ry="35" fill="url(#latentGrad)" stroke="#7B1FA2" stroke-width="3"/>
  <text x="1750" y="1002" font-family="Times New Roman, serif" font-size="18" font-weight="bold" fill="#7B1FA2" text-anchor="middle">z</text>
  
  <line x1="1800" y1="995" x2="1870" y2="995" stroke="#7B1FA2" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1835" y="980" font-family="Arial, sans-serif" font-size="12" fill="#7B1FA2">D</text>
  
  <rect x="1870" y="960" width="100" height="70" rx="8" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="2"/>
  <text x="1920" y="1000" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Image x</text>
  
  <text x="1750" y="1080" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Diffusion happens in z-space!</text>
  
  <text x="1490" y="1170" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Properties:</text>
  <text x="1510" y="1205" font-family="Arial, sans-serif" font-size="16" fill="#333">- Compressed representation</text>
  <text x="1510" y="1235" font-family="Arial, sans-serif" font-size="16" fill="#333">- Lower dimensionality (8x - 64x)</text>
  <text x="1510" y="1265" font-family="Arial, sans-serif" font-size="16" fill="#333">- Stable Diffusion, LDM</text>
  
  <rect x="1490" y="1290" width="600" height="50" rx="8" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2"/>
  <text x="1790" y="1322" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">z = Encoder(x), x_hat = Decoder(z)</text>
  
  <text x="1790" y="1390" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">dim(z) &lt;&lt; dim(x)</text>
  
  <!-- Section 3: Dimensionality Comparison -->
  <rect x="50" y="1530" width="2100" height="500" rx="12" fill="#FFFFFF" stroke="#1976D2" stroke-width="3"/>
  <text x="80" y="1590" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#0D47A1">3. Dimensionality Comparison</text>
  
  <!-- Table -->
  <rect x="100" y="1640" width="2000" height="350" rx="10" fill="#F5F5F5" stroke="#666" stroke-width="2"/>
  
  <!-- Header row -->
  <rect x="120" y="1660" width="400" height="50" rx="5" fill="#1976D2"/>
  <text x="320" y="1695" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFF" text-anchor="middle">Domain</text>
  <rect x="540" y="1660" width="400" height="50" rx="5" fill="#1976D2"/>
  <text x="740" y="1695" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFF" text-anchor="middle">Data Space</text>
  <rect x="960" y="1660" width="350" height="50" rx="5" fill="#1976D2"/>
  <text x="1135" y="1695" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFF" text-anchor="middle">Typical d</text>
  <rect x="1330" y="1660" width="750" height="50" rx="5" fill="#1976D2"/>
  <text x="1705" y="1695" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#FFF" text-anchor="middle">Example</text>
  
  <!-- Row 1: Images -->
  <rect x="120" y="1720" width="400" height="60" fill="#E3F2FD"/>
  <text x="320" y="1760" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565C0" text-anchor="middle">Images</text>
  <rect x="540" y="1720" width="400" height="60" fill="#FFF"/>
  <text x="740" y="1760" font-family="Times New Roman, serif" font-size="18" fill="#000" text-anchor="middle">[0,1]^(H x W x C)</text>
  <rect x="960" y="1720" width="350" height="60" fill="#FFF"/>
  <text x="1135" y="1760" font-family="Arial, sans-serif" font-size="18" fill="#000" text-anchor="middle">50K - 3M</text>
  <rect x="1330" y="1720" width="750" height="60" fill="#FFF"/>
  <text x="1705" y="1760" font-family="Arial, sans-serif" font-size="16" fill="#000" text-anchor="middle">256 x 256 x 3 = 196,608 dimensions</text>
  
  <!-- Row 2: Text -->
  <rect x="120" y="1790" width="400" height="60" fill="#FFF3E0"/>
  <text x="320" y="1830" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#E65100" text-anchor="middle">Text (Discrete)</text>
  <rect x="540" y="1790" width="400" height="60" fill="#FFF"/>
  <text x="740" y="1830" font-family="Times New Roman, serif" font-size="18" fill="#000" text-anchor="middle">{1, ..., V}^n</text>
  <rect x="960" y="1790" width="350" height="60" fill="#FFF"/>
  <text x="1135" y="1830" font-family="Arial, sans-serif" font-size="18" fill="#000" text-anchor="middle">100 - 8192</text>
  <rect x="1330" y="1790" width="750" height="60" fill="#FFF"/>
  <text x="1705" y="1830" font-family="Arial, sans-serif" font-size="16" fill="#000" text-anchor="middle">1024 tokens, V = 50K vocabulary</text>
  
  <!-- Row 3: Audio -->
  <rect x="120" y="1860" width="400" height="60" fill="#E8F5E9"/>
  <text x="320" y="1900" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2E7D32" text-anchor="middle">Audio</text>
  <rect x="540" y="1860" width="400" height="60" fill="#FFF"/>
  <text x="740" y="1900" font-family="Times New Roman, serif" font-size="18" fill="#000" text-anchor="middle">R^T (waveform)</text>
  <rect x="960" y="1860" width="350" height="60" fill="#FFF"/>
  <text x="1135" y="1900" font-family="Arial, sans-serif" font-size="18" fill="#000" text-anchor="middle">160K - 1M</text>
  <rect x="1330" y="1860" width="750" height="60" fill="#FFF"/>
  <text x="1705" y="1900" font-family="Arial, sans-serif" font-size="16" fill="#000" text-anchor="middle">10 sec @ 16kHz = 160,000 samples</text>
  
  <!-- Row 4: Latent -->
  <rect x="120" y="1930" width="400" height="60" fill="#F3E5F5"/>
  <text x="320" y="1970" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Latent (LDM)</text>
  <rect x="540" y="1930" width="400" height="60" fill="#FFF"/>
  <text x="740" y="1970" font-family="Times New Roman, serif" font-size="18" fill="#000" text-anchor="middle">R^(h x w x c)</text>
  <rect x="960" y="1930" width="350" height="60" fill="#FFF"/>
  <text x="1135" y="1970" font-family="Arial, sans-serif" font-size="18" fill="#000" text-anchor="middle">4K - 16K</text>
  <rect x="1330" y="1930" width="750" height="60" fill="#FFF"/>
  <text x="1705" y="1970" font-family="Arial, sans-serif" font-size="16" fill="#000" text-anchor="middle">32 x 32 x 4 = 4,096 (8x compression)</text>
  
  <!-- Section 4: Data Preprocessing -->
  <rect x="50" y="2070" width="2100" height="550" rx="12" fill="url(#latentGrad)" stroke="#7B1FA2" stroke-width="3"/>
  <text x="80" y="2130" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#4A148C">4. Data Preprocessing for Diffusion</text>
  
  <!-- Normalization -->
  <rect x="80" y="2180" width="660" height="400" rx="10" fill="#FFFFFF" stroke="#7B1FA2" stroke-width="2"/>
  <text x="410" y="2230" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Normalization</text>
  
  <text x="110" y="2290" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Why Normalize?</text>
  <text x="130" y="2330" font-family="Arial, sans-serif" font-size="16" fill="#333">- Gaussian noise has zero mean, unit variance</text>
  <text x="130" y="2365" font-family="Arial, sans-serif" font-size="16" fill="#333">- Data should match this scale</text>
  <text x="130" y="2400" font-family="Arial, sans-serif" font-size="16" fill="#333">- Prevents numerical instability</text>
  
  <rect x="110" y="2440" width="600" height="55" rx="8" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2"/>
  <text x="410" y="2477" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#000" text-anchor="middle">x_norm = (x - mean) / std</text>
  
  <text x="410" y="2545" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">Common: x in [0,1] --&gt; x in [-1,1]</text>
  
  <!-- Embedding -->
  <rect x="770" y="2180" width="660" height="400" rx="10" fill="#FFFFFF" stroke="#E65100" stroke-width="2"/>
  <text x="1100" y="2230" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#E65100" text-anchor="middle">Embedding (Discrete)</text>
  
  <text x="800" y="2290" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">For Text/Tokens:</text>
  
  <rect x="830" y="2320" width="80" height="45" rx="5" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="870" y="2350" font-family="Courier, monospace" font-size="16" font-weight="bold" fill="#E65100" text-anchor="middle">cat</text>
  
  <line x1="920" y1="2342" x2="1000" y2="2342" stroke="#E65100" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="1010" y="2310" width="200" height="65" rx="5" fill="#FFF3E0" stroke="#E65100" stroke-width="2"/>
  <text x="1110" y="2340" font-family="Courier, monospace" font-size="14" fill="#E65100" text-anchor="middle">[0.2, -0.5, 0.8,</text>
  <text x="1110" y="2362" font-family="Courier, monospace" font-size="14" fill="#E65100" text-anchor="middle">..., 0.1]</text>
  
  <rect x="800" y="2400" width="600" height="55" rx="8" fill="#FFE0B2" stroke="#E65100" stroke-width="2"/>
  <text x="1100" y="2437" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">e = Embed(token) in R^d_model</text>
  
  <text x="1100" y="2530" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">Enables continuous diffusion on discrete tokens</text>
  
  <!-- Latent Encoding -->
  <rect x="1460" y="2180" width="660" height="400" rx="10" fill="#FFFFFF" stroke="#1976D2" stroke-width="2"/>
  <text x="1790" y="2230" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1976D2" text-anchor="middle">Latent Encoding</text>
  
  <text x="1490" y="2290" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">Autoencoder Pipeline:</text>
  
  <rect x="1510" y="2320" width="90" height="50" rx="5" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="1555" y="2352" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1976D2" text-anchor="middle">Image</text>
  
  <line x1="1600" y1="2345" x2="1660" y2="2345" stroke="#1976D2" stroke-width="2" marker-end="url(#arrow)"/>
  
  <ellipse cx="1710" cy="2345" rx="35" ry="25" fill="#BBDEFB" stroke="#1976D2" stroke-width="2"/>
  <text x="1710" y="2352" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976D2" text-anchor="middle">E</text>
  
  <line x1="1745" y1="2345" x2="1805" y2="2345" stroke="#1976D2" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="1815" y="2320" width="80" height="50" rx="5" fill="url(#contGrad)" stroke="#1976D2" stroke-width="3"/>
  <text x="1855" y="2352" font-family="Times New Roman, serif" font-size="16" font-weight="bold" fill="#0D47A1" text-anchor="middle">z</text>
  
  <rect x="1490" y="2400" width="600" height="55" rx="8" fill="#E3F2FD" stroke="#1976D2" stroke-width="2"/>
  <text x="1790" y="2437" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">z = Encoder(x), dim(z) &lt;&lt; dim(x)</text>
  
  <text x="1790" y="2510" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">VQ-VAE, VAE, or perceptual encoder</text>
  <text x="1790" y="2545" font-family="Arial, sans-serif" font-size="16" fill="#666" text-anchor="middle">Diffusion in z-space is MUCH faster!</text>
  
  <!-- Section 5: Key Insight -->
  <rect x="50" y="2660" width="2100" height="280" rx="12" fill="#FFFFFF" stroke="#1976D2" stroke-width="3"/>
  <text x="80" y="2720" font-family="Georgia, serif" font-size="36" font-weight="bold" fill="#0D47A1">5. Mathematical Notation Summary</text>
  
  <rect x="100" y="2760" width="900" height="150" rx="10" fill="#F5F5F5" stroke="#666" stroke-width="2"/>
  <text x="150" y="2810" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#1565C0">x0</text>
  <text x="250" y="2810" font-family="Arial, sans-serif" font-size="18" fill="#000">Clean data sample from p_data</text>
  <text x="150" y="2850" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#1565C0">x_t</text>
  <text x="250" y="2850" font-family="Arial, sans-serif" font-size="18" fill="#000">Noisy data at timestep t</text>
  <text x="150" y="2890" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#1565C0">x_T</text>
  <text x="250" y="2890" font-family="Arial, sans-serif" font-size="18" fill="#000">Pure noise ~ N(0,I) or all [MASK]</text>
  
  <rect x="1100" y="2760" width="1000" height="150" rx="10" fill="#F5F5F5" stroke="#666" stroke-width="2"/>
  <text x="1150" y="2810" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#7B1FA2">z</text>
  <text x="1250" y="2810" font-family="Arial, sans-serif" font-size="18" fill="#000">Latent representation (for LDMs)</text>
  <text x="1150" y="2850" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#7B1FA2">E(), D()</text>
  <text x="1350" y="2850" font-family="Arial, sans-serif" font-size="18" fill="#000">Encoder and Decoder functions</text>
  <text x="1150" y="2890" font-family="Times New Roman, serif" font-size="22" font-weight="bold" fill="#E65100">V, [M]</text>
  <text x="1350" y="2890" font-family="Arial, sans-serif" font-size="18" fill="#000">Vocabulary size, Mask token</text>
  
  <!-- Key Insight Box -->
  <rect x="50" y="2980" width="2100" height="140" rx="12" fill="#E3F2FD" stroke="#1976D2" stroke-width="4"/>
  <text x="1100" y="3030" font-family="Georgia, serif" font-size="28" font-weight="bold" fill="#0D47A1" text-anchor="middle">KEY INSIGHT</text>
  <text x="1100" y="3080" font-family="Arial, sans-serif" font-size="22" fill="#1565C0" text-anchor="middle">The choice of data space fundamentally determines the diffusion process design!</text>
  <text x="1100" y="3105" font-family="Arial, sans-serif" font-size="18" fill="#333" text-anchor="middle">Continuous --&gt; Gaussian noise | Discrete --&gt; Masking | Latent --&gt; Compressed + Gaussian</text>
  
  <!-- Summary Boxes -->
  <rect x="50" y="3160" width="2100" height="200" rx="12" fill="#FFFFFF" stroke="#333" stroke-width="3"/>
  <text x="1100" y="3210" font-family="Georgia, serif" font-size="32" font-weight="bold" fill="#333" text-anchor="middle">Data Space Summary</text>
  
  <rect x="100" y="3250" width="650" height="80" rx="8" fill="url(#contGrad)" stroke="#1976D2" stroke-width="2"/>
  <text x="425" y="3280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1565C0" text-anchor="middle">Continuous (Images, Audio)</text>
  <text x="425" y="3310" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">X = R^d or [0,1]^d</text>
  
  <rect x="780" y="3250" width="650" height="80" rx="8" fill="url(#discGrad)" stroke="#E65100" stroke-width="2"/>
  <text x="1105" y="3280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E65100" text-anchor="middle">Discrete (Text, Categories)</text>
  <text x="1105" y="3310" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">X = {1, ..., V}^n</text>
  
  <rect x="1460" y="3250" width="650" height="80" rx="8" fill="url(#latentGrad)" stroke="#7B1FA2" stroke-width="2"/>
  <text x="1785" y="3280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Latent (Stable Diffusion, LDM)</text>
  <text x="1785" y="3310" font-family="Times New Roman, serif" font-size="20" font-weight="bold" fill="#000" text-anchor="middle">Z = E(X), dim &lt;&lt; d</text>
  
  <!-- Footer -->
  <rect x="50" y="3400" width="2100" height="80" rx="10" fill="url(#headerGrad)"/>
  <text x="1100" y="3450" font-family="Georgia, serif" font-size="26" font-weight="bold" fill="#FFFFFF" text-anchor="middle">Diffusion Theory - Data Space | Where Does Diffusion Operate?</text>
  
  <!-- Version info -->
  <text x="1100" y="3550" font-family="Arial, sans-serif" font-size="14" fill="#666" text-anchor="middle">Data Space in Diffusion Models - Comprehensive Visual Guide</text>
</svg>

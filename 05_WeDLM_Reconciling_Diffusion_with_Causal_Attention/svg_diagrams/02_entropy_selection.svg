<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <linearGradient id="lowEntropy" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#16a34a"/>
    </linearGradient>
    <linearGradient id="highEntropy" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="100%" style="stop-color:#dc2626"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="450" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" fill="#fff" font-size="22" font-weight="bold" font-family="Arial">
    Entropy-Based Position Selection
  </text>
  
  <!-- Formula Box -->
  <rect x="50" y="55" width="700" height="60" rx="10" fill="#2d2d44"/>
  <text x="400" y="85" text-anchor="middle" fill="#a855f7" font-size="18" font-family="Arial">
    Adjusted Entropy: H̃ⱼ = H(Pⱼ) + λ(j - j_min)
  </text>
  <text x="400" y="105" text-anchor="middle" fill="#888" font-size="14" font-family="Arial">
    Fill if H̃ⱼ &lt; τ (threshold)
  </text>
  
  <!-- Window Visualization -->
  <text x="400" y="150" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold" font-family="Arial">
    Sliding Window (8 positions)
  </text>
  
  <!-- Tokens -->
  <g transform="translate(100, 170)">
    <!-- Position 0 -->
    <rect x="0" y="0" width="70" height="40" rx="8" fill="url(#lowEntropy)"/>
    <text x="35" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="35" y="55" text-anchor="middle" fill="#22c55e" font-size="11" font-family="Arial">H=0.2</text>
    <text x="35" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.2</text>
    <text x="35" y="90" text-anchor="middle" fill="#22c55e" font-size="12" font-weight="bold" font-family="Arial">✓ FILL</text>
    
    <!-- Position 1 -->
    <rect x="80" y="0" width="70" height="40" rx="8" fill="url(#lowEntropy)"/>
    <text x="115" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="115" y="55" text-anchor="middle" fill="#22c55e" font-size="11" font-family="Arial">H=0.15</text>
    <text x="115" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.17</text>
    <text x="115" y="90" text-anchor="middle" fill="#22c55e" font-size="12" font-weight="bold" font-family="Arial">✓ FILL</text>
    
    <!-- Position 2 -->
    <rect x="160" y="0" width="70" height="40" rx="8" fill="url(#highEntropy)"/>
    <text x="195" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="195" y="55" text-anchor="middle" fill="#ef4444" font-size="11" font-family="Arial">H=0.8</text>
    <text x="195" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.84</text>
    <text x="195" y="90" text-anchor="middle" fill="#ef4444" font-size="12" font-weight="bold" font-family="Arial">✗ SKIP</text>
    
    <!-- Position 3 -->
    <rect x="240" y="0" width="70" height="40" rx="8" fill="url(#lowEntropy)"/>
    <text x="275" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="275" y="55" text-anchor="middle" fill="#22c55e" font-size="11" font-family="Arial">H=0.25</text>
    <text x="275" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.31</text>
    <text x="275" y="90" text-anchor="middle" fill="#22c55e" font-size="12" font-weight="bold" font-family="Arial">✓ FILL</text>
    
    <!-- Position 4 -->
    <rect x="320" y="0" width="70" height="40" rx="8" fill="url(#highEntropy)"/>
    <text x="355" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="355" y="55" text-anchor="middle" fill="#ef4444" font-size="11" font-family="Arial">H=0.6</text>
    <text x="355" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.68</text>
    <text x="355" y="90" text-anchor="middle" fill="#ef4444" font-size="12" font-weight="bold" font-family="Arial">✗ SKIP</text>
    
    <!-- Position 5 -->
    <rect x="400" y="0" width="70" height="40" rx="8" fill="url(#highEntropy)"/>
    <text x="435" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="435" y="55" text-anchor="middle" fill="#ef4444" font-size="11" font-family="Arial">H=0.55</text>
    <text x="435" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.65</text>
    <text x="435" y="90" text-anchor="middle" fill="#ef4444" font-size="12" font-weight="bold" font-family="Arial">✗ SKIP</text>
    
    <!-- Position 6 -->
    <rect x="480" y="0" width="70" height="40" rx="8" fill="url(#lowEntropy)"/>
    <text x="515" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="515" y="55" text-anchor="middle" fill="#22c55e" font-size="11" font-family="Arial">H=0.18</text>
    <text x="515" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.30</text>
    <text x="515" y="90" text-anchor="middle" fill="#22c55e" font-size="12" font-weight="bold" font-family="Arial">✓ FILL</text>
    
    <!-- Position 7 -->
    <rect x="560" y="0" width="70" height="40" rx="8" fill="url(#highEntropy)"/>
    <text x="595" y="25" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">[MASK]</text>
    <text x="595" y="55" text-anchor="middle" fill="#ef4444" font-size="11" font-family="Arial">H=0.7</text>
    <text x="595" y="70" text-anchor="middle" fill="#fff" font-size="10" font-family="Arial">H̃=0.84</text>
    <text x="595" y="90" text-anchor="middle" fill="#ef4444" font-size="12" font-weight="bold" font-family="Arial">✗ SKIP</text>
  </g>
  
  <!-- Threshold Line -->
  <line x1="100" y1="300" x2="700" y2="300" stroke="#fbbf24" stroke-width="2" stroke-dasharray="10,5"/>
  <text x="720" y="305" fill="#fbbf24" font-size="14" font-family="Arial">τ = 0.4</text>
  
  <!-- Legend -->
  <rect x="50" y="340" width="700" height="100" rx="10" fill="#2d2d44"/>
  <text x="400" y="365" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold" font-family="Arial">
    Result: 4 positions filled in ONE step!
  </text>
  
  <rect x="120" y="385" width="20" height="20" rx="4" fill="url(#lowEntropy)"/>
  <text x="150" y="400" fill="#fff" font-size="13" font-family="Arial">Low Entropy (H̃ &lt; τ) → Fill with sampled token</text>
  
  <rect x="450" y="385" width="20" height="20" rx="4" fill="url(#highEntropy)"/>
  <text x="480" y="400" fill="#fff" font-size="13" font-family="Arial">High Entropy (H̃ ≥ τ) → Keep as [MASK]</text>
  
  <text x="400" y="430" text-anchor="middle" fill="#a855f7" font-size="14" font-family="Arial">
    λ = 0.02 (Position penalty encourages left-to-right decoding)
  </text>
</svg>

